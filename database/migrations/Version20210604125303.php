<?php

namespace Database\Migrations;

use Doctrine\Migrations\AbstractMigration;
use Doctrine\DBAL\Schema\Schema as Schema;

class Version20210604125303 extends AbstractMigration
{
    /**
     * @param Schema $schema
     */
    public function up(Schema $schema): void
    {
        $this->abortIf($this->connection->getDatabasePlatform()->getName() != 'mysql', 'Migration can only be executed safely on \'mysql\'.');

        $this->addSql('CREATE TABLE as_attribute (id INT AUTO_INCREMENT NOT NULL, attribute_name VARCHAR(128) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB');
        $this->addSql('CREATE TABLE as_attribute_option (id INT AUTO_INCREMENT NOT NULL, attribute_id INT DEFAULT NULL, option_value VARCHAR(128) DEFAULT NULL, INDEX attribute_id_index (attribute_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB');
        $this->addSql('CREATE TABLE as_product_option_relation (id INT AUTO_INCREMENT NOT NULL, option_id INT DEFAULT NULL, product_id INT DEFAULT NULL, INDEX product_id_index (product_id), INDEX option_id_index (option_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB');
        $this->addSql('CREATE TABLE category (id INT AUTO_INCREMENT NOT NULL, attribute_set_name VARCHAR(128) DEFAULT NULL, attribute_set_id SMALLINT DEFAULT NULL, INDEX attribute_set_id (attribute_set_id), INDEX attribute_set_name (attribute_set_name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB');
        $this->addSql('CREATE TABLE group_image (grimg INT AUTO_INCREMENT NOT NULL, PRIMARY KEY(grimg)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB');
        $this->addSql('CREATE TABLE group_product (grtov INT AUTO_INCREMENT NOT NULL, grimg INT DEFAULT NULL, grtov_sku VARCHAR(128) DEFAULT NULL, grtov_name VARCHAR(128) DEFAULT NULL, grtov_name_site VARCHAR(128) DEFAULT NULL, updated_at_local_name DATETIME DEFAULT NULL, updated_at_site_name DATETIME DEFAULT NULL, INDEX grtov_sku (grtov_sku), INDEX grimg (grimg), INDEX updated_at_local_name (updated_at_local_name), PRIMARY KEY(grtov)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB');
        $this->addSql('CREATE TABLE shop_image (id INT AUTO_INCREMENT NOT NULL, attribute_set_id INT DEFAULT NULL, postavshik INT DEFAULT NULL, artikul CHAR(128) DEFAULT NULL, image VARCHAR(255) DEFAULT NULL, name TEXT DEFAULT NULL, name_pricelist VARCHAR(255) DEFAULT NULL, img_tut VARCHAR(32) DEFAULT NULL, size_x SMALLINT UNSIGNED DEFAULT NULL, size_y SMALLINT UNSIGNED DEFAULT NULL, size_xy INT UNSIGNED DEFAULT NULL, size_tut INT UNSIGNED DEFAULT NULL, k_grey INT DEFAULT NULL, k_rgb_mix INT UNSIGNED DEFAULT NULL, size_tam INT DEFAULT NULL, entity_id INT DEFAULT NULL, skachan TINYINT(1) DEFAULT NULL, dop VARCHAR(32) DEFAULT NULL, is_in_stock TINYINT(1) DEFAULT NULL, k_1_1 INT DEFAULT NULL, k_2_1 INT DEFAULT NULL, k_3_1 INT DEFAULT NULL, k_1_2 INT DEFAULT NULL, k_2_2 INT DEFAULT NULL, k_3_2 INT DEFAULT NULL, k_1_3 INT DEFAULT NULL, k_2_3 INT DEFAULT NULL, k_3_3 INT DEFAULT NULL, k_1_4 INT DEFAULT NULL, k_2_4 INT DEFAULT NULL, k_3_4 INT DEFAULT NULL, k_1_5 INT DEFAULT NULL, k_2_5 INT DEFAULT NULL, k_3_5 INT DEFAULT NULL, k_1_6 INT DEFAULT NULL, k_2_6 INT DEFAULT NULL, k_3_6 INT DEFAULT NULL, k_1_7 INT DEFAULT NULL, k_2_7 INT DEFAULT NULL, k_3_7 INT DEFAULT NULL, k_1_8 INT DEFAULT NULL, k_2_8 INT DEFAULT NULL, k_3_8 INT DEFAULT NULL, k_1_9 INT DEFAULT NULL, k_2_9 INT DEFAULT NULL, k_3_9 INT DEFAULT NULL, k_1_10 INT DEFAULT NULL, k_2_10 INT DEFAULT NULL, k_3_10 INT DEFAULT NULL, k_1_11 INT DEFAULT NULL, k_2_11 INT DEFAULT NULL, k_3_11 INT DEFAULT NULL, k_1_12 INT DEFAULT NULL, k_2_12 INT DEFAULT NULL, k_3_12 INT DEFAULT NULL, k_1_13 INT DEFAULT NULL, k_2_13 INT DEFAULT NULL, k_3_13 INT DEFAULT NULL, k_1_14 INT DEFAULT NULL, k_2_14 INT DEFAULT NULL, k_3_14 INT DEFAULT NULL, k_1_15 INT DEFAULT NULL, k_2_15 INT DEFAULT NULL, k_3_15 INT DEFAULT NULL, k_1_16 INT DEFAULT NULL, k_2_16 INT DEFAULT NULL, k_3_16 INT DEFAULT NULL, ott_0 INT DEFAULT NULL, ott_1 INT DEFAULT NULL, ott_2 INT DEFAULT NULL, ott_3 INT DEFAULT NULL, ott_4 INT DEFAULT NULL, ott_5 INT DEFAULT NULL, ott_6 INT DEFAULT NULL, ott_7 INT DEFAULT NULL, ott_8 INT DEFAULT NULL, ott_9 INT DEFAULT NULL, ott_10 INT DEFAULT NULL, ott_11 INT DEFAULT NULL, ott_12 INT DEFAULT NULL, ott_13 INT DEFAULT NULL, ott_14 INT DEFAULT NULL, ott_15 INT DEFAULT NULL, ott_16 INT DEFAULT NULL, ott_17 INT DEFAULT NULL, ott_18 INT DEFAULT NULL, ott_19 INT DEFAULT NULL, ott_20 INT DEFAULT NULL, ott_21 INT DEFAULT NULL, ott_22 INT DEFAULT NULL, ott_23 INT DEFAULT NULL, ott_24 INT DEFAULT NULL, ott_25 INT DEFAULT NULL, ott_26 INT DEFAULT NULL, ott_27 INT DEFAULT NULL, ott_28 INT DEFAULT NULL, ott_29 INT DEFAULT NULL, ott_30 INT DEFAULT NULL, ott_31 INT DEFAULT NULL, ott_32 INT DEFAULT NULL, ott_33 INT DEFAULT NULL, ott_34 INT DEFAULT NULL, ott_35 INT DEFAULT NULL, ott_36 INT DEFAULT NULL, ott_37 INT DEFAULT NULL, ott_38 INT DEFAULT NULL, ott_39 INT DEFAULT NULL, ott_40 INT DEFAULT NULL, ott_41 INT DEFAULT NULL, ott_42 INT DEFAULT NULL, ott_43 INT DEFAULT NULL, ott_44 INT DEFAULT NULL, ott_45 INT DEFAULT NULL, ott_46 INT DEFAULT NULL, ott_47 INT DEFAULT NULL, ott_48 INT DEFAULT NULL, ott_49 INT DEFAULT NULL, ott_50 INT DEFAULT NULL, ott_51 INT DEFAULT NULL, ott_52 INT DEFAULT NULL, ott_53 INT DEFAULT NULL, ott_54 INT DEFAULT NULL, ott_55 INT DEFAULT NULL, ott_56 INT DEFAULT NULL, ott_57 INT DEFAULT NULL, ott_58 INT DEFAULT NULL, ott_59 INT DEFAULT NULL, ott_60 INT DEFAULT NULL, ott_61 INT DEFAULT NULL, ott_62 INT DEFAULT NULL, ott_63 INT DEFAULT NULL, name_updated_at DATETIME DEFAULT NULL, updated_at DATETIME on update CURRENT_TIMESTAMP, upakovka VARCHAR(100) DEFAULT NULL, INDEX shop_image_entity_id_index (entity_id), INDEX img_tut (img_tut), INDEX k_rgb_mix (k_rgb_mix), INDEX size_tam (size_tam), INDEX shop_image_postavshik_index (postavshik), INDEX image (image), INDEX k_grey (k_grey), INDEX size_tut (size_tut), INDEX skachan (skachan), INDEX shop_image_attribute_set_id_index (attribute_set_id), UNIQUE INDEX shop_image_artikul_uindex (artikul), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB');
        $this->addSql('CREATE TABLE shop_image_tmp (id INT AUTO_INCREMENT NOT NULL, artikul CHAR(128) DEFAULT NULL, image VARCHAR(255) DEFAULT NULL, main TINYINT(1) DEFAULT NULL, name TEXT DEFAULT NULL, name_pricelist VARCHAR(255) DEFAULT NULL, attribute_set_id SMALLINT DEFAULT NULL, img_tut VARCHAR(32) DEFAULT NULL, size_x SMALLINT UNSIGNED DEFAULT NULL, size_y SMALLINT UNSIGNED DEFAULT NULL, size_xy INT UNSIGNED DEFAULT NULL, size_tut INT UNSIGNED DEFAULT NULL, k_grey INT DEFAULT NULL, k_rgb_mix INT UNSIGNED DEFAULT NULL, size_tam INT DEFAULT NULL, entity_id INT DEFAULT NULL, skachan TINYINT(1) DEFAULT NULL, dop VARCHAR(32) DEFAULT NULL, is_in_stock TINYINT(1) DEFAULT NULL, postavshik INT DEFAULT NULL, k_1_1 INT DEFAULT NULL, k_2_1 INT DEFAULT NULL, k_3_1 INT DEFAULT NULL, k_1_2 INT DEFAULT NULL, k_2_2 INT DEFAULT NULL, k_3_2 INT DEFAULT NULL, k_1_3 INT DEFAULT NULL, k_2_3 INT DEFAULT NULL, k_3_3 INT DEFAULT NULL, k_1_4 INT DEFAULT NULL, k_2_4 INT DEFAULT NULL, k_3_4 INT DEFAULT NULL, k_1_5 INT DEFAULT NULL, k_2_5 INT DEFAULT NULL, k_3_5 INT DEFAULT NULL, k_1_6 INT DEFAULT NULL, k_2_6 INT DEFAULT NULL, k_3_6 INT DEFAULT NULL, k_1_7 INT DEFAULT NULL, k_2_7 INT DEFAULT NULL, k_3_7 INT DEFAULT NULL, k_1_8 INT DEFAULT NULL, k_2_8 INT DEFAULT NULL, k_3_8 INT DEFAULT NULL, k_1_9 INT DEFAULT NULL, k_2_9 INT DEFAULT NULL, k_3_9 INT DEFAULT NULL, k_1_10 INT DEFAULT NULL, k_2_10 INT DEFAULT NULL, k_3_10 INT DEFAULT NULL, k_1_11 INT DEFAULT NULL, k_2_11 INT DEFAULT NULL, k_3_11 INT DEFAULT NULL, k_1_12 INT DEFAULT NULL, k_2_12 INT DEFAULT NULL, k_3_12 INT DEFAULT NULL, k_1_13 INT DEFAULT NULL, k_2_13 INT DEFAULT NULL, k_3_13 INT DEFAULT NULL, k_1_14 INT DEFAULT NULL, k_2_14 INT DEFAULT NULL, k_3_14 INT DEFAULT NULL, k_1_15 INT DEFAULT NULL, k_2_15 INT DEFAULT NULL, k_3_15 INT DEFAULT NULL, k_1_16 INT DEFAULT NULL, k_2_16 INT DEFAULT NULL, k_3_16 INT DEFAULT NULL, ott_0 INT DEFAULT NULL, ott_1 INT DEFAULT NULL, ott_2 INT DEFAULT NULL, ott_3 INT DEFAULT NULL, ott_4 INT DEFAULT NULL, ott_5 INT DEFAULT NULL, ott_6 INT DEFAULT NULL, ott_7 INT DEFAULT NULL, ott_8 INT DEFAULT NULL, ott_9 INT DEFAULT NULL, ott_10 INT DEFAULT NULL, ott_11 INT DEFAULT NULL, ott_12 INT DEFAULT NULL, ott_13 INT DEFAULT NULL, ott_14 INT DEFAULT NULL, ott_15 INT DEFAULT NULL, ott_16 INT DEFAULT NULL, ott_17 INT DEFAULT NULL, ott_18 INT DEFAULT NULL, ott_19 INT DEFAULT NULL, ott_20 INT DEFAULT NULL, ott_21 INT DEFAULT NULL, ott_22 INT DEFAULT NULL, ott_23 INT DEFAULT NULL, ott_24 INT DEFAULT NULL, ott_25 INT DEFAULT NULL, ott_26 INT DEFAULT NULL, ott_27 INT DEFAULT NULL, ott_28 INT DEFAULT NULL, ott_29 INT DEFAULT NULL, ott_30 INT DEFAULT NULL, ott_31 INT DEFAULT NULL, ott_32 INT DEFAULT NULL, ott_33 INT DEFAULT NULL, ott_34 INT DEFAULT NULL, ott_35 INT DEFAULT NULL, ott_36 INT DEFAULT NULL, ott_37 INT DEFAULT NULL, ott_38 INT DEFAULT NULL, ott_39 INT DEFAULT NULL, ott_40 INT DEFAULT NULL, ott_41 INT DEFAULT NULL, ott_42 INT DEFAULT NULL, ott_43 INT DEFAULT NULL, ott_44 INT DEFAULT NULL, ott_45 INT DEFAULT NULL, ott_46 INT DEFAULT NULL, ott_47 INT DEFAULT NULL, ott_48 INT DEFAULT NULL, ott_49 INT DEFAULT NULL, ott_50 INT DEFAULT NULL, ott_51 INT DEFAULT NULL, ott_52 INT DEFAULT NULL, ott_53 INT DEFAULT NULL, ott_54 INT DEFAULT NULL, ott_55 INT DEFAULT NULL, ott_56 INT DEFAULT NULL, ott_57 INT DEFAULT NULL, ott_58 INT DEFAULT NULL, ott_59 INT DEFAULT NULL, ott_60 INT DEFAULT NULL, ott_61 INT DEFAULT NULL, ott_62 INT DEFAULT NULL, ott_63 INT DEFAULT NULL, upakovka VARCHAR(100) DEFAULT NULL, INDEX artikul (artikul), INDEX te_set_id_postavshik_index (attribute_set_id, postavshik), INDEX shop_image_tmp_entity_id_index (entity_id), INDEX postavshik (postavshik), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB');
        $this->addSql('CREATE TABLE sku_group_image (id INT AUTO_INCREMENT NOT NULL, shop_image_id INT DEFAULT NULL, grimg INT DEFAULT NULL, INDEX grimg (grimg), INDEX shop_image_id_fk (shop_image_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB');
        $this->addSql('CREATE TABLE sku_group_product (id INT AUTO_INCREMENT NOT NULL, grtov INT DEFAULT NULL, shop_image_id INT DEFAULT NULL, sku_name VARCHAR(255) DEFAULT NULL, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, INDEX grtov (grtov), UNIQUE INDEX shop_image_id_uindex (shop_image_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB');
        $this->addSql('CREATE TABLE sku_no_group (id INT AUTO_INCREMENT NOT NULL, shop_image_id INT DEFAULT NULL, INDEX shop_image_id_index (shop_image_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB');
        $this->addSql('CREATE TABLE supplier (id INT AUTO_INCREMENT NOT NULL, postavshik INT NOT NULL, postavshik_value VARCHAR(255) DEFAULT NULL, is_visible TINYINT(1) DEFAULT \'1\', has_new_products TINYINT(1) DEFAULT \'1\', INDEX supplier_postavshik_index (postavshik), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB');
        $this->addSql('CREATE TABLE users (id INT AUTO_INCREMENT NOT NULL, email VARCHAR(255) NOT NULL, name VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, remember_token VARCHAR(255) DEFAULT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8mb4 COLLATE `utf8mb4_unicode_ci` ENGINE = InnoDB');
        $this->addSql('ALTER TABLE as_attribute_option ADD CONSTRAINT FK_5DC130C2B6E62EFA FOREIGN KEY (attribute_id) REFERENCES as_attribute (id) ON DELETE CASCADE');
        $this->addSql('ALTER TABLE as_product_option_relation ADD CONSTRAINT FK_DD70125AA7C41D6F FOREIGN KEY (option_id) REFERENCES as_attribute_option (id) ON DELETE CASCADE');
        $this->addSql('ALTER TABLE as_product_option_relation ADD CONSTRAINT FK_DD70125A4584665A FOREIGN KEY (product_id) REFERENCES shop_image (id) ON DELETE CASCADE');
        $this->addSql('ALTER TABLE group_product ADD CONSTRAINT FK_554A50A1688525E9 FOREIGN KEY (grimg) REFERENCES group_image (grimg) ON DELETE CASCADE');
        $this->addSql('ALTER TABLE shop_image ADD CONSTRAINT FK_22B5E0D321A2342 FOREIGN KEY (attribute_set_id) REFERENCES category (id) ON DELETE CASCADE');
        $this->addSql('ALTER TABLE shop_image ADD CONSTRAINT FK_22B5E0D48CAF594 FOREIGN KEY (postavshik) REFERENCES supplier (id) ON DELETE CASCADE');
        $this->addSql('ALTER TABLE sku_group_image ADD CONSTRAINT FK_14B593C8E61DDFFB FOREIGN KEY (shop_image_id) REFERENCES shop_image (id) ON DELETE CASCADE');
        $this->addSql('ALTER TABLE sku_group_image ADD CONSTRAINT FK_14B593C8688525E9 FOREIGN KEY (grimg) REFERENCES group_image (grimg) ON DELETE CASCADE');
        $this->addSql('ALTER TABLE sku_group_product ADD CONSTRAINT FK_8321CF1F24FD57BA FOREIGN KEY (grtov) REFERENCES group_product (grtov) ON DELETE CASCADE');
        $this->addSql('ALTER TABLE sku_group_product ADD CONSTRAINT FK_8321CF1FE61DDFFB FOREIGN KEY (shop_image_id) REFERENCES shop_image (id) ON DELETE CASCADE');
        $this->addSql('ALTER TABLE sku_no_group ADD CONSTRAINT FK_8DAC313E61DDFFB FOREIGN KEY (shop_image_id) REFERENCES shop_image (id) ON DELETE CASCADE');
    }

    /**
     * @param Schema $schema
     */
    public function down(Schema $schema): void
    {
        $this->abortIf($this->connection->getDatabasePlatform()->getName() != 'mysql', 'Migration can only be executed safely on \'mysql\'.');

        $this->addSql('ALTER TABLE as_attribute_option DROP FOREIGN KEY FK_5DC130C2B6E62EFA');
        $this->addSql('ALTER TABLE as_product_option_relation DROP FOREIGN KEY FK_DD70125AA7C41D6F');
        $this->addSql('ALTER TABLE shop_image DROP FOREIGN KEY FK_22B5E0D321A2342');
        $this->addSql('ALTER TABLE group_product DROP FOREIGN KEY FK_554A50A1688525E9');
        $this->addSql('ALTER TABLE sku_group_image DROP FOREIGN KEY FK_14B593C8688525E9');
        $this->addSql('ALTER TABLE sku_group_product DROP FOREIGN KEY FK_8321CF1F24FD57BA');
        $this->addSql('ALTER TABLE as_product_option_relation DROP FOREIGN KEY FK_DD70125A4584665A');
        $this->addSql('ALTER TABLE sku_group_image DROP FOREIGN KEY FK_14B593C8E61DDFFB');
        $this->addSql('ALTER TABLE sku_group_product DROP FOREIGN KEY FK_8321CF1FE61DDFFB');
        $this->addSql('ALTER TABLE sku_no_group DROP FOREIGN KEY FK_8DAC313E61DDFFB');
        $this->addSql('ALTER TABLE shop_image DROP FOREIGN KEY FK_22B5E0D48CAF594');
        $this->addSql('DROP TABLE as_attribute');
        $this->addSql('DROP TABLE as_attribute_option');
        $this->addSql('DROP TABLE as_product_option_relation');
        $this->addSql('DROP TABLE category');
        $this->addSql('DROP TABLE group_image');
        $this->addSql('DROP TABLE group_product');
        $this->addSql('DROP TABLE shop_image');
        $this->addSql('DROP TABLE shop_image_tmp');
        $this->addSql('DROP TABLE sku_group_image');
        $this->addSql('DROP TABLE sku_group_product');
        $this->addSql('DROP TABLE sku_no_group');
        $this->addSql('DROP TABLE supplier');
        $this->addSql('DROP TABLE users');
    }
}
